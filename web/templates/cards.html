{% extends 'base.html' %}
{% block content %}
<h1>Управление карточками</h1>
<form method="post" enctype="multipart/form-data">
    <input type="text" name="name" placeholder="Название" value="{{ card.name if card else '' }}" required>
    <textarea name="description" placeholder="Описание" required>{{ card.description if card else '' }}</textarea>
    <input type="number" name="points" placeholder="Очки" inputmode="numeric" value="{{ card.points if card else '' }}" required>
    <select name="rarity" required>
        <option value="обычная" {% if card and card.rarity == 'обычная' %}selected{% endif %}>Обычная</option>
        <option value="редкая" {% if card and card.rarity == 'редкая' %}selected{% endif %}>Редкая</option>
        <option value="легендарная" {% if card and card.rarity == 'легендарная' %}selected{% endif %}>Легендарная</option>
    </select>
    <input type="file" name="image" accept="image/*" required>
    <button type="submit">{% if card %}Обновить{% else %}Добавить{% endif %}</button>
</form>

<h2>Список карточек</h2>
<table>
    {% for card in cards %}
    <tr>
        <td>{{ card.name }}</td>
        <td>{{ card.rarity }}</td>
        <td>{{ card.points }}</td>
        <td><a href="{{ url_for('edit_card', card_id=card.id) }}">Редактировать</a></td>
        <td>
            <form method="post" action="{{ url_for('delete_card', card_id=card.id) }}">
                <button type="submit">Удалить</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>

<div>
    {% if page > 1 %}
        <a href="{{ url_for('cards', page=page-1) }}">Предыдущая</a>
    {% endif %}
    {% if page < total_pages %}
        <a href="{{ url_for('cards', page=page+1) }}">Следующая</a>
    {% endif %}
</div>
{% endblock %}